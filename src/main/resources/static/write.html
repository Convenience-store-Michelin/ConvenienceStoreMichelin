<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <title>Temp</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, user-scalable=no, initial-scale=1.0, minimal-ui">
    <link rel="stylesheet" href="assets/css/style.css">
    <meta name="description" content="임시">
    <meta property="og:type" content="website">
    <meta property="og:title" content="임시">
    <meta property="og:description" content="임시">
    <meta property="og:url" content="">
</head>
<body>
    <div class="wrapper write-wrap">
        <div class="container">
            <div class="layout">
                <form method="post">
                    <h2 class="h">리뷰 쓰기</h2>
                    <div class="write-container">
                        <div class="row">
                            <select name="" id="" class="selectbox">
                                <option value="0">상품 대분류</option>
                                <option value="1">카테고리1</option>
                                <option value="2">카테고리2</option>
                            </select>
                        </div>
                        <div class="row">
                            <label for="title" class="a11y">리뷰 제목</label>
                            <input type="text" id="title" placeholder="제목">
                        </div>
                        <div class="row block">
                            <label for="review" class="a11y">리뷰 본문</label>
                            <textarea name="review" id="review" cols="42" rows="8" placeholder="내용"></textarea>
                            <div class="text-length">
                                <span>0</span>/<span class="max-length">2,200</span>
                            </div>
                        </div>
                        <div class="row block hole">
                            <form id="upload-file-form">
                                <label for="image_file" class="btn btn-thin bg-main">사진 첨부하기</label>
                                <input type="file" id="image_file" class="a11y" accept="image/*" onchange="loadFile(this)">
                            </form>
                            <div class="thumb"><!-- [D] 사진 추가하면 썸네일 생성 -->
                                <img src="https://dummyimage.com/100x100/000/fff" id="image_view" alt="제품 사진">
                                <button type="button" class="btn-delete bg-main" onclick="cancelLoadedFile()"><span>삭제하기</span></button>
                            <label for="image_file" class="btn btn-thin bg-main">사진 첨부하기</label>
                            <input type="file" id="image_file" class="a11y" accept="image/*" onchange="loadFile(this)">
                            <div class="thumb"><!-- [D] 사진 추가하면 썸네일 생성 -->
                                <img src="https://dummyimage.com/100x100/000/fff" id="image_view" alt="제품 사진">
                                <button type="button" class="btn-delete bg-main" onclick="cancelFile()"><span>삭제하기</span></button>
                            </div>
                        </div>
                        <div class="row">
                            <label for="findStore" class="a11y">편의점 찾기</label>
                            <input type="text" id="findStore" disabled>
                            <button type="button" class="btn btn-thin bg-main has-width">편의점 찾기</button>
                        </div>
                    </div>
                    <div class="func">
                        <button type="button" class="btn btn-cancel bg-gray">취소</button>
                        <button type="submit" class="btn btn-submit bg-main">리뷰 등록하기</button>
                    </div>
                </form>
            </div>
        </div>
    </div>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script>
    <script>
        function loadFile(input) {
            var file = input.files[0];	//선택된 파일 가져오기
            var image_view = document.getElementById("image_view");
            //이미지 source 가져오기
            image_view.src = URL.createObjectURL(file);

            //image_view.style.width = "70%";
            //image_view.style.height = "70%";
            image_view.style.objectFit = "cover";
            uploadFile(file);
        }

        function cancelLoadedFile() {
            var default_image = "https://dummyimage.com/100x100/000/fff";
            var image_view = document.getElementById("image_view");
            image_view.src = default_image;
        }

        function uploadFile(file) {
            var form = new FormData();
            form.append("file", file);

            $.ajax({
                url: "/file/upload",
                type: "POST",
                data: form,
                enctype: 'multipart/form-data',
                processData: false,
                contentType: false,
                cache: false,
                success: function () {
                    alert("파일 업로드 성공");
                } ,
                error: function () {
                    alert("파일 업로드 실패");
                }
            })
        }
    </script>
</body>
</html>
